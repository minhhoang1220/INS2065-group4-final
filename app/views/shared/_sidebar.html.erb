<div id="mySidepanel" class="sidepanel bg-white flex flex-col fixed h-full">
  <div class="relative flex items-center justify-between min-h-[80px] px-6 border-b border-gray-200">
    <%= link_to root_path, class: "transition-opacity duration-1000 mt-3 ml-4" do %>
      <%= image_tag("datingapplogo.png", size: '60', class: "mx-auto") %>
    <% end %>
    
    <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">
      <i class="fas fa-times text-2xl text-gray-600 hover:text-gray-900"></i>
    </a>
  </div>

  <div class="flex-1 overflow-x-hidden pt-4">
    <%= link_to "/usertables", class: "nav-button flex items-center px-5 py-4 text-gray-600 hover:text-gray-900 hover:bg-gray-50 transition-colors duration-200" do %>
      <i class="fas fa-home w-8 text-center"></i>
      <span class="ml-2">Home</span>
    <% end %>

    <%= link_to "/swipes", class: "nav-button flex items-center px-5 py-4 text-gray-600 hover:text-gray-900 hover:bg-gray-50 transition-colors duration-200" do %>
      <i class="fas fa-heart w-8 text-center"></i>
      <span class="ml-2">Swipe</span>
    <% end %>

    <%= link_to "/messages", class: "nav-button flex items-center px-5 py-4 text-gray-600 hover:text-gray-900 hover:bg-gray-50 transition-colors duration-200" do %>
      <i class="fas fa-comment w-8 text-center"></i>
      <span class="ml-2">Message</span>
    <% end %>

    <hr class="mx-4 border-t border-gray-200 my-4">

    <%= link_to "/memberships", class: "nav-button flex items-center px-5 py-4 text-gray-600 hover:text-gray-900 hover:bg-gray-50 transition-colors duration-200" do %>
      <i class="fas fa-crown w-8 text-center"></i>
      <span class="ml-2">Membership</span>
    <% end %>

    <%= link_to "/matches", class: "nav-button flex items-center px-5 py-4 text-gray-600 hover:text-gray-900 hover:bg-gray-50 transition-colors duration-200" do %>
      <i class="fas fa-users w-8 text-center"></i>
      <span class="ml-2">Match</span>
    <% end %>
  </div>

  <div class="border-t border-gray-200">
    <% if user_signed_in? %>
      <div class="p-4">
        <%= link_to edit_user_registration_path, class: "flex items-center px-5 py-4 text-gray-600 hover:text-gray-900 hover:bg-gray-50 transition-colors duration-200" do %>
          <i class="fas fa-cog w-8 text-center"></i>
          <span class="ml-2">Edit account</span>
        <% end %>

        <%= button_to destroy_user_session_path, method: :delete, class: "w-full flex items-center px-5 py-4 text-gray-600 hover:text-gray-900 hover:bg-gray-50 transition-colors duration-200" do %>
          <i class="fas fa-sign-out-alt w-8 text-center"></i>
          <span class="ml-2">Log out</span>
        <% end %>
      </div>
    <% end %>
  </div>
</div>

<button class="openbtn fixed z-10" onclick="openNav()">
  <i class="fas fa-bars text-gray-600 hover:text-gray-900 text-2xl"></i>
</button>

<style>
.sidepanel {
  width: 256px;
  z-index: 20;
  top: 64px;
  left: 0;
  height: calc(100% - 64px);
  overflow-x: hidden;
  border-radius: 0;
  box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
  transform: translateX(-100%);
  transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.sidepanel.open {
  transform: translateX(0);
}

.openbtn {
  top: calc(64px + 12px);
  left: 32px;
  background: none;
  border: none;
  cursor: pointer;
  padding: 10px;
  border-radius: 8px;
  transition: all 0.3s;
  opacity: 1;
  transition: opacity 0.3s ease;
}

.openbtn.hidden {
  opacity: 0;
  pointer-events: none;
}

.openbtn:hover {
  background-color: rgba(0, 0, 0, 0.05);
}

.closebtn {
  text-decoration: none;
  transition: all 0.3s;
}

.closebtn:hover {
  opacity: 0.7;
}
</style>

<script>
function openNav() {
  const sidebar = document.getElementById("mySidepanel");
  const openBtn = document.querySelector(".openbtn");
  sidebar.classList.add("open");
  openBtn.classList.add("hidden");
}

function closeNav() {
  const sidebar = document.getElementById("mySidepanel");
  const openBtn = document.querySelector(".openbtn");
  sidebar.classList.remove("open");
  openBtn.classList.remove("hidden");
}
</script>